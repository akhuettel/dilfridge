diff -u -r -N clapack-3.2.1-CMAKE-orig/CMakeLists.txt clapack-3.2.1-CMAKE/CMakeLists.txt
--- clapack-3.2.1-CMAKE-orig/CMakeLists.txt	2009-08-10 20:46:33.000000000 +0200
+++ clapack-3.2.1-CMAKE/CMakeLists.txt	2010-08-27 01:42:37.000000000 +0200
@@ -18,8 +18,6 @@
   add_definitions(-DNO_BLAS_WRAP)
 endif()
 include_directories(${CLAPACK_SOURCE_DIR}/INCLUDE)
-add_subdirectory(F2CLIBS)
-add_subdirectory(BLAS)
 add_subdirectory(SRC)
 add_subdirectory(TESTING)
 set(CLAPACK_VERSION 3.2.1)
@@ -27,8 +25,9 @@
 set(CPACK_PACKAGE_VERSION_MINOR 2)
 set(CPACK_PACKAGE_VERSION_PATCH 1)
 include(CPack)
-export(TARGETS f2c blas lapack FILE clapack-targets.cmake)
+export(TARGETS clapack FILE clapack-targets.cmake)
 configure_file(${CLAPACK_SOURCE_DIR}/clapack-config-version.cmake.in
   ${CLAPACK_BINARY_DIR}/clapack-config-version.cmake @ONLY)
 configure_file(${CLAPACK_SOURCE_DIR}/clapack-config.cmake.in
   ${CLAPACK_BINARY_DIR}/clapack-config.cmake @ONLY)
+
diff -u -r -N clapack-3.2.1-CMAKE-orig/SRC/CMakeLists.txt clapack-3.2.1-CMAKE/SRC/CMakeLists.txt
--- clapack-3.2.1-CMAKE-orig/SRC/CMakeLists.txt	2009-08-10 19:47:54.000000000 +0200
+++ clapack-3.2.1-CMAKE/SRC/CMakeLists.txt	2010-08-27 00:54:03.000000000 +0200
@@ -375,6 +375,6 @@
 if(BUILD_COMPLEX16)
   set(ALLOBJ  ${ZLASRC} ${ALLAUX} ${DZLAUX})
 endif()
-add_library(lapack ${ALLOBJ} ${ALLXOBJ})
-target_link_libraries(lapack blas)
+add_library(clapack ${ALLOBJ} ${ALLXOBJ})
+target_link_libraries(clapack blas f2c)
 
diff -u -r -N clapack-3.2.1-CMAKE-orig/TESTING/EIG/CMakeLists.txt clapack-3.2.1-CMAKE/TESTING/EIG/CMakeLists.txt
--- clapack-3.2.1-CMAKE-orig/TESTING/EIG/CMakeLists.txt	2009-08-10 19:47:54.000000000 +0200
+++ clapack-3.2.1-CMAKE/TESTING/EIG/CMakeLists.txt	2010-08-27 00:26:48.000000000 +0200
@@ -119,7 +119,7 @@
 
 macro(add_eig_executable name )
   add_executable(${name} ${ARGN})
-  target_link_libraries(${name} tmglib lapack )
+  target_link_libraries(${name} tmglib clapack )
 endmacro(add_eig_executable)
 
 add_eig_executable(xeigtsts ${SEIGTST} ${SCIGTST} ${AEIGTST} 
diff -u -r -N clapack-3.2.1-CMAKE-orig/TESTING/LIN/CMakeLists.txt clapack-3.2.1-CMAKE/TESTING/LIN/CMakeLists.txt
--- clapack-3.2.1-CMAKE-orig/TESTING/LIN/CMakeLists.txt	2009-08-10 20:06:06.000000000 +0200
+++ clapack-3.2.1-CMAKE/TESTING/LIN/CMakeLists.txt	2010-08-27 00:27:04.000000000 +0200
@@ -189,7 +189,7 @@
 
 macro(add_lin_executable name )
   add_executable(${name} ${ARGN})
-  target_link_libraries(${name} tmglib lapack)
+  target_link_libraries(${name} tmglib clapack)
 endmacro(add_lin_executable)
 
 add_lin_executable(xlintsts ${ALINTST} ${SCLNTST} ${SLINTST} 
diff -u -r -N clapack-3.2.1-CMAKE-orig/TESTING/MATGEN/CMakeLists.txt clapack-3.2.1-CMAKE/TESTING/MATGEN/CMakeLists.txt
--- clapack-3.2.1-CMAKE-orig/TESTING/MATGEN/CMakeLists.txt	2009-08-10 19:47:54.000000000 +0200
+++ clapack-3.2.1-CMAKE/TESTING/MATGEN/CMakeLists.txt	2010-08-27 01:41:50.000000000 +0200
@@ -65,5 +65,6 @@
 if(BUILD_COMPLEX16)
   set(ALLOBJ $(ZMATGEN) $(DZATGEN))
 endif()
-add_library(tmglib ${ALLOBJ} )
+
+add_library(tmglib ${ALLOBJ} i_len_trim.c i_ceiling.c )
 
diff -u -r -N clapack-3.2.1-CMAKE-orig/TESTING/MATGEN/i_ceiling.c clapack-3.2.1-CMAKE/TESTING/MATGEN/i_ceiling.c
--- clapack-3.2.1-CMAKE-orig/TESTING/MATGEN/i_ceiling.c	1970-01-01 01:00:00.000000000 +0100
+++ clapack-3.2.1-CMAKE/TESTING/MATGEN/i_ceiling.c	2010-08-27 01:40:15.000000000 +0200
@@ -0,0 +1,38 @@
+/* file has been copied from the included f2c library - dilfridge */
+
+#include <f2c.h>
+
+#ifdef KR_headers
+integer i_sceiling(x) real *x;
+#else
+#ifdef __cplusplus
+extern "C" {
+#endif
+integer i_sceiling(real *x)
+#endif
+{
+#define CEIL(x) ((int)(x) + ((x) > 0 && (x) != (int)(x)))
+
+    return (integer) CEIL(*x);
+}
+#ifdef __cplusplus
+}
+#endif
+
+
+#ifdef KR_headers
+integer i_dceiling(x) doublereal *x;
+#else
+#ifdef __cplusplus
+extern "C" {
+#endif
+integer i_dceiling(doublereal *x)
+#endif
+{
+#define CEIL(x) ((int)(x) + ((x) > 0 && (x) != (int)(x)))
+
+    return (integer) CEIL(*x);
+}
+#ifdef __cplusplus
+}
+#endif
diff -u -r -N clapack-3.2.1-CMAKE-orig/TESTING/MATGEN/i_len_trim.c clapack-3.2.1-CMAKE/TESTING/MATGEN/i_len_trim.c
--- clapack-3.2.1-CMAKE-orig/TESTING/MATGEN/i_len_trim.c	1970-01-01 01:00:00.000000000 +0100
+++ clapack-3.2.1-CMAKE/TESTING/MATGEN/i_len_trim.c	2010-08-27 01:40:23.000000000 +0200
@@ -0,0 +1,25 @@
+/* file has been copied from the included f2c library - dilfridge */
+
+#include <f2c.h>
+
+#ifdef __cplusplus
+extern "C" {
+#endif
+
+#ifdef KR_headers
+integer i_len_trim(s, n) char *s; ftnlen n;
+#else
+integer i_len_trim(char *s, ftnlen n)
+#endif
+{
+  int i;
+
+  for(i=n-1;i>=0;i--)
+    if(s[i] != ' ')
+      return i + 1;
+
+  return(0);
+}
+#ifdef __cplusplus
+}
+#endif
