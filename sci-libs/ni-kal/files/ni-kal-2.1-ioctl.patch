Inofficial patch for (SuSE Linux 11.4) newer kernels
Source: https://decibel.ni.com/content/thread/9252?start=0&tstart=0

diff -ruN unpacked.orig/usr/local/natinst/nikal/src/nikal/nikal.c unpacked/usr/local/natinst/nikal/src/nikal/nikal.c
--- unpacked.orig/usr/local/natinst/nikal/src/nikal/nikal.c	2011-02-24 21:31:11.000000000 +0100
+++ unpacked/usr/local/natinst/nikal/src/nikal/nikal.c	2011-06-07 19:07:34.000000000 +0200
@@ -224,6 +224,9 @@
 static int nNIKAL100_open(nLinux_inode *the_inode, nLinux_fileHandle *filePtr);
 static int nNIKAL100_release(nLinux_inode *the_inode, nLinux_fileHandle *filePtr);
 static int nNIKAL100_ioctl(nLinux_inode *the_inode, nLinux_fileHandle *filePtr, unsigned int command, unsigned long param);
+#ifdef HAVE_UNLOCKED_IOCTL
+static long nNIKAL100_unlockedIoctl(nLinux_fileHandle *filePtr, unsigned int command, unsigned long param);
+#endif
 #ifdef HAVE_COMPAT_IOCTL
 static long nNIKAL100_compatIoctl(nLinux_fileHandle *filePtr, unsigned int command, unsigned long param);
 #endif
@@ -486,7 +489,11 @@
 {
    .open = nNIKAL100_open,
    .release = nNIKAL100_release,
+#ifdef HAVE_UNLOCKED_IOCTL
+   .unlocked_ioctl = nNIKAL100_unlockedIoctl,
+#else
    .ioctl = nNIKAL100_ioctl,
+#endif
 #ifdef HAVE_COMPAT_IOCTL
    .compat_ioctl = nNIKAL100_compatIoctl,
 #endif
@@ -1565,6 +1572,13 @@
 
    return status;
 }
+#ifdef HAVE_UNLOCKED_IOCTL
+static long nNIKAL100_unlockedIoctl(nLinux_fileHandle *filePtr, unsigned int command,
+   unsigned long param)
+{
+   return (long)nNIKAL100_ioctl(NULL, filePtr, command, param);
+}
+#endif
 #ifdef HAVE_COMPAT_IOCTL
 static long nNIKAL100_compatIoctl(nLinux_fileHandle *filePtr, unsigned int command,
    unsigned long param)
